services:
  - type: web
    name: interview-api
    runtime: docker
    plan: free
    rootDir: ./backend
    dockerfilePath: ./Dockerfile
    envVars:
      # Database - Auto-provided by Render
      - key: DATABASE_URL
        fromDatabase:
          name: interview-db
          property: connectionString
      
      # API URLs - Set these manually
      - key: GPT_ACCESS_URL
        sync: false
      - key: FAQ_ACCESS_URL
        sync: false
      - key: Token_Verify_URL
        sync: false
      
      # Timeouts
      - key: GPT_ACCESS_TIMEOUT
        value: "15"
      - key: ACCESS_TIMEOUT
        value: "15"
      
      # Test JWT - Set manually
      - key: TEST_JWT
        sync: false

      # Frontend URL - Set manually
      - key: FRONTEND_URL
        value: https://interview-frontend-kukr.onrender.com 

  # Frontend Service
  - type: web
    name: interview-frontend
    runtime: docker
    plan: free
    rootDir: ./frontend/ai-interview-coach
    dockerfilePath: ./Dockerfile
    envVars:
      - key: NEXT_PUBLIC_API_URL
        value: https://interview-api-i4oo.onrender.com
      - key: NEXT_PUBLIC_GOOGLE_CLIENT_ID
        value: 205444288447-54r4a3edjrg55qd5bc42lrqvmih0sf80.apps.googleusercontent.com

databases:
  - name: interview-db
    databaseName: interview
    user: interview_user
    plan: free