services:
  - type: web
    name: interview-api
    runtime: docker
    plan: free
    rootDir: ./backend
    dockerfilePath: ./Dockerfile
    envVars:
      # Database - Auto-provided by Render
      - key: DATABASE_URL
        fromDatabase:
          name: interview-db
          property: connectionString
      
      # API URLs - Set these manually in Render dashboard
      - key: GPT_ACCESS_URL
        sync: false
      - key: FAQ_ACCESS_URL
        sync: false
      - key: Token_Verify_URL
        sync: false
      
      # Timeouts
      - key: GPT_ACCESS_TIMEOUT
        value: "15"
      - key: ACCESS_TIMEOUT
        value: "15"
      
      # Test JWT - Set manually
      - key: TEST_JWT
        sync: false

  # Frontend Service
  - type: web
    name: interview-frontend
    runtime: docker
    plan: free
    rootDir: ./frontend/ai-interview-coach
    dockerfilePath: ./Dockerfile
    envVars:
      - key: NEXT_PUBLIC_API_URL
        value: https://interview-api-jo0i.onrender.com

databases:
  - name: interview-db
    databaseName: interview
    user: interview_user
    plan: free